#!/bin/bash

set -ex

GOSU_VERSION=${GOSU_VERSION:-1.14}
ARCH=${ARCH:-amd64}
PREFIX=${PREFIX:-/usr/local}

# gpg --keyserver hkp://keyserver.ubuntu.com:80 \
#     --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4

# Key retrieval would sometimes fail during the build, to I
# have embedded tianon's public key in the script.

cat << 'PUBKEY' > /tmp/pubkey.asc
-----BEGIN PGP PUBLIC KEY BLOCK-----

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
=nWP8
-----END PGP PUBLIC KEY BLOCK-----
PUBKEY

curl -sSL "https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$ARCH" -o /tmp/gosu
curl -sSL "https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$ARCH.asc" -o /tmp/gosu.asc

gpg --import /tmp/pubkey.asc
gpg --verify /tmp/gosu.asc
rm /tmp/gosu.asc

mv /tmp/gosu "$PREFIX/bin/gosu"
chmod +x "$PREFIX/bin/gosu"
